<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
<style>
    @font-face {
      font-family: 'Vazirmatn';
      src: url('Vazirmatn.ttf') format('truetype');
      font-weight: 100 900;
      font-style: normal;
    }
    
    body {
      width: 750px;
      height: 550px;
      padding: 0;
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
      background: #fafafa;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }
    
    .toolbar {
      background: linear-gradient(to bottom, #ffffff 0%, #f8f8f8 100%);
      padding: 6px 10px;
      border-bottom: 1px solid #d0d0d0;
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
      flex-shrink: 0;
    }
    
    .toolbar-row {
      display: flex;
      gap: 6px;
      align-items: center;
      margin-bottom: 5px;
    }
    
    .toolbar-row:last-child {
      margin-bottom: 0;
    }
    
    .toolbar-section {
      display: flex;
      align-items: center;
      gap: 4px;
      padding: 3px 6px;
      background: white;
      border: 1px solid #e0e0e0;
      border-radius: 4px;
      box-shadow: 0 1px 2px rgba(0,0,0,0.03);
    }
    
    .toolbar-section.text-group {
      flex: 1;
    }
    
    .section-label {
      font-size: 9px;
      font-weight: 600;
      color: #888;
      text-transform: uppercase;
      letter-spacing: 0.3px;
      margin-right: 3px;
    }
    
    .btn {
      padding: 3px 7px;
      border: 1px solid #d0d0d0;
      background: white;
      border-radius: 3px;
      cursor: pointer;
      font-size: 11px;
      font-weight: 500;
      min-width: 24px;
      transition: all 0.2s;
      color: #333;
    }
    
    .btn:hover {
      background: #f5f5f5;
      border-color: #aaa;
    }
    
    .btn:active {
      background: #e8e8e8;
    }
    
    .btn.active {
      background: #4CAF50;
      color: white;
      border-color: #45a049;
    }
    
    .btn-icon {
      display: flex;
      align-items: center;
      justify-content: center;
      min-width: 28px;
      padding: 5px 7px;
    }
    
    .btn-icon svg {
      width: 14px;
      height: 14px;
    }
    
    .btn-recycle {
      background: #ff8181;
      color: white;
      border-color: #ff5252;
    }
    
    .btn-recycle:hover {
      background: #ff5252;
      border-color: #ff3838;
    }
    
    .btn-preview {
      background: #4a90e2;
      color: white;
      border-color: #3a7bc8;
    }
    
    .btn-preview:hover {
      background: #3a7bc8;
      border-color: #2a6bb8;
    }
    
    .btn-download {
      background: #4CAF50;
      color: white;
      border-color: #45a049;
    }
    
    .btn-download:hover {
      background: #45a049;
      border-color: #3d8b40;
    }
    
    .color-picker {
      width: 28px;
      height: 24px;
      border: 1px solid #d0d0d0;
      border-radius: 3px;
      cursor: pointer;
      padding: 2px;
      transition: border-color 0.2s;
    }
    
    .color-picker:hover {
      border-color: #999;
    }
    
    .number-control {
      display: flex;
      align-items: center;
      gap: 2px;
    }
    
    .number-display {
      min-width: 32px;
      text-align: center;
      font-size: 10px;
      font-weight: 600;
      padding: 2px 4px;
      border: 1px solid #e0e0e0;
      border-radius: 3px;
      background: #fafafa;
      color: #333;
    }
    
    .checkbox-group {
      display: flex;
      align-items: center;
      gap: 4px;
    }
    
    .checkbox-group input[type="checkbox"] {
      cursor: pointer;
      width: 13px;
      height: 13px;
      accent-color: #4a90e2;
    }
    
    .checkbox-group label {
      font-size: 10px;
      font-weight: 500;
      cursor: pointer;
      color: #555;
      user-select: none;
    }
    
    .text-container {
      flex: 1;
      overflow: auto;
      background: white;
      box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
      display: flex;
      justify-content: flex-end;
      align-items: flex-start;
    }
    
    #textInput {
      padding: 12px;
      font-size: 20px;
      direction: rtl;
      text-align: right;
      border: none;
      resize: none;
      outline: none;
      font-family: 'Vazirmatn', Arial, sans-serif;
      background: transparent;
      overflow-wrap: break-word;
      word-wrap: break-word;
      min-width: 100%;
      min-height: 100%;
    }
    
    [contenteditable] {
      -webkit-user-select: text;
      user-select: text;
    }
    
    [contenteditable]:empty:before {
      content: attr(placeholder);
      color: #999;
    }
    
    .bottom-bar {
      padding: 8px 10px;
      background: linear-gradient(to bottom, #f8f8f8 0%, #ffffff 100%);
      border-top: 1px solid #d0d0d0;
      display: flex;
      gap: 6px;
      align-items: center;
      flex-shrink: 0;
      box-shadow: 0 -1px 3px rgba(0,0,0,0.05);
    }
    
    #insertBtn {
      flex: 1;
      padding: 8px 16px;
      background: linear-gradient(to bottom, #5a9fd4 0%, #4a8fc4 100%);
      color: white;
      border: 1px solid #3a7fb4;
      border-radius: 5px;
      cursor: pointer;
      font-size: 13px;
      font-weight: 600;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      transition: all 0.2s;
      box-shadow: 0 2px 4px rgba(74, 143, 196, 0.3);
      position: relative;
    }
    
    #insertBtn svg {
      width: 16px;
      height: 16px;
    }
    
    #insertBtn:hover {
      background: linear-gradient(to bottom, #6aafd4 0%, #5a9fc4 100%);
      box-shadow: 0 3px 6px rgba(74, 143, 196, 0.4);
      transform: translateY(-1px);
    }
    
    #insertBtn:active {
      transform: translateY(0);
      box-shadow: 0 1px 2px rgba(74, 143, 196, 0.3);
    }
    
    .shortcut-hint {
      font-size: 10px;
      opacity: 0.8;
      font-weight: 400;
      margin-left: auto;
      padding: 2px 6px;
      background: rgba(0,0,0,0.15);
      border-radius: 3px;
    }
    
    .toast {
      position: fixed;
      bottom: 60px;
      right: 20px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 12px 20px;
      border-radius: 8px;
      display: none;
      align-items: center;
      gap: 10px;
      font-size: 13px;
      font-weight: 500;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      z-index: 10000;
      animation: slideIn 0.3s ease;
    }
    
    .toast svg {
      width: 18px;
      height: 18px;
    }
    
    .toast.show {
      display: flex;
    }
    
    @keyframes slideIn {
      from {
        transform: translateX(400px);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }
    
    @keyframes slideOut {
      from {
        transform: translateX(0);
        opacity: 1;
      }
      to {
        transform: translateX(400px);
        opacity: 0;
      }
    }
    
    .preview-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.85);
      z-index: 20000;
      align-items: center;
      justify-content: center;
    }
    
    .preview-modal.show {
      display: flex;
    }
    
    .preview-content {
      background: white;
      border-radius: 12px;
      padding: 0;
      max-width: 90%;
      max-height: 90%;
      display: flex;
      flex-direction: column;
      box-shadow: 0 10px 40px rgba(0,0,0,0.5);
    }
    
    .preview-header {
      padding: 16px 20px;
      border-bottom: 1px solid #e0e0e0;
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: linear-gradient(to bottom, #f8f8f8, #ffffff);
      border-radius: 12px 12px 0 0;
    }
    
    .preview-title {
      font-weight: 600;
      font-size: 15px;
      color: #333;
    }
    
    .preview-close {
      padding: 6px 14px;
      background: #f44336;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 12px;
      font-weight: 500;
      transition: all 0.2s;
    }
    
    .preview-close:hover {
      background: #d32f2f;
    }
    
    .preview-image-container {
      padding: 20px;
      overflow: auto;
      display: flex;
      align-items: center;
      justify-content: center;
      max-height: calc(90vh - 80px);
    }
    
    .preview-image {
      max-width: 100%;
      max-height: 100%;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    
    .divider {
      width: 1px;
      height: 18px;
      background: #d0d0d0;
      margin: 0 2px;
    }
    
    .slider-group {
      display: flex;
      align-items: center;
      gap: 6px;
    }
    
    .slider-group input[type="range"] {
      width: 80px;
      height: 4px;
      border-radius: 2px;
      outline: none;
      cursor: pointer;
      accent-color: #4a90e2;
    }
    
    .slider-group .value {
      font-size: 9px;
      font-weight: 600;
      color: #666;
      min-width: 35px;
      text-align: center;
    }
    
    .wrap-control {
      display: flex;
      align-items: center;
      gap: 6px;
    }
    
    .quick-emoji-container {
      display: flex;
      gap: 3px;
      flex-wrap: wrap;
    }
    
    .quick-emoji {
      padding: 2px 6px;
      font-size: 16px;
      cursor: pointer;
      border-radius: 4px;
      transition: all 0.2s;
      background: white;
      border: 1px solid #e0e0e0;
      line-height: 1;
    }
    
    .quick-emoji:hover {
      background: #f0f0f0;
      transform: scale(1.1);
      border-color: #4a90e2;
    }
    
    .quick-emoji:active {
      transform: scale(0.95);
    }
    
    .color-palette-panel {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      border-radius: 12px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.3);
      z-index: 15000;
      width: 500px;
      max-height: 80vh;
      overflow: auto;
    }
    
    .color-palette-panel.show {
      display: block;
    }
    
    .color-palette-header {
      padding: 16px 20px;
      border-bottom: 1px solid #e0e0e0;
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: linear-gradient(to bottom, #f8f8f8, #ffffff);
      border-radius: 12px 12px 0 0;
      position: sticky;
      top: 0;
      z-index: 1;
    }
    
    .color-palette-title {
      font-weight: 600;
      font-size: 15px;
      color: #333;
    }
    
    .color-palette-close {
      padding: 6px 14px;
      background: #f44336;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 12px;
      font-weight: 500;
      transition: all 0.2s;
    }
    
    .color-palette-close:hover {
      background: #d32f2f;
    }
    
    .color-palette-grid {
      padding: 20px;
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
      gap: 12px;
    }
    
    .color-palette-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      padding: 8px;
      border-radius: 8px;
      transition: all 0.2s;
      border: 2px solid transparent;
    }
    
    .color-palette-item:hover {
      background: #f5f5f5;
      border-color: #4a90e2;
      transform: scale(1.05);
    }
    
    .color-palette-item:active {
      transform: scale(0.95);
    }
    
    .color-palette-swatch {
      width: 50px;
      height: 50px;
      border-radius: 8px;
      border: 2px solid #e0e0e0;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .color-palette-label {
      font-size: 10px;
      font-weight: 500;
      color: #666;
      text-align: center;
    }
    
    .color-palette-custom {
      padding: 16px 20px;
      border-top: 1px solid #e0e0e0;
      display: flex;
      align-items: center;
      gap: 12px;
      background: #fafafa;
      border-radius: 0 0 12px 12px;
      position: sticky;
      bottom: 0;
    }
    
    .color-palette-custom label {
      font-size: 12px;
      font-weight: 600;
      color: #666;
    }
    
    .color-palette-custom input[type="color"] {
      width: 50px;
      height: 35px;
      border: 2px solid #d0d0d0;
      border-radius: 6px;
      cursor: pointer;
    }
    
    .btn-color-palette {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: 1px solid #5a6fd8;
    }
    
    .btn-color-palette:hover {
      background: linear-gradient(135deg, #7688ea 0%, #8655b2 100%);
      border-color: #4a5fc8;
    }
    
    .picker-modal {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      border-radius: 12px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.3);
      z-index: 15000;
      width: 600px;
      max-height: 80vh;
    }
    
    .picker-modal.show {
      display: block;
    }
    
    .picker-content {
      display: flex;
      flex-direction: column;
      max-height: 80vh;
    }
    
    .picker-header {
      padding: 16px 20px;
      border-bottom: 1px solid #e0e0e0;
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: linear-gradient(to bottom, #f8f8f8, #ffffff);
      border-radius: 12px 12px 0 0;
    }
    
    .picker-title {
      font-weight: 600;
      font-size: 15px;
      color: #333;
    }
    
    .picker-close {
      padding: 6px 14px;
      background: #f44336;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 12px;
      font-weight: 500;
      transition: all 0.2s;
    }
    
    .picker-close:hover {
      background: #d32f2f;
    }
    
    .picker-grid {
      padding: 20px;
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(50px, 1fr));
      gap: 8px;
      overflow-y: auto;
      max-height: calc(80vh - 80px);
    }
    
    .picker-item {
      font-size: 32px;
      padding: 10px;
      text-align: center;
      cursor: pointer;
      border-radius: 8px;
      transition: all 0.2s;
      border: 2px solid transparent;
      background: white;
    }
    
    .picker-item:hover {
      background: #f0f0f0;
      border-color: #4a90e2;
      transform: scale(1.15);
    }
    
    .picker-item:active {
      transform: scale(0.95);
    }
  </style>
</head>
<body>
  <div class="toolbar">
    <!-- First Row: Text Formatting -->
    <div class="toolbar-row">
      <div class="toolbar-section text-group">
        <span class="section-label">Size</span>
        <div class="number-control">
          <button class="btn" id="fontSizeDec">-</button>
          <span class="number-display" id="fontSizeDisplay">20</span>
          <button class="btn" id="fontSizeInc">+</button>
        </div>
        <div class="divider"></div>
        <button class="btn" id="boldBtn" title="Bold">B</button>
        <button class="btn" id="italicBtn" title="Italic">I</button>
        <button class="btn" id="underlineBtn" title="Underline">U</button>
        <div class="divider"></div>
        <input type="color" class="color-picker" id="textColor" value="#000000" title="Text Color">
      </div>
      
      <div class="toolbar-section">
        <span class="section-label">Line</span>
        <div class="number-control">
          <button class="btn" id="lineHeightDec">-</button>
          <span class="number-display" id="lineHeightDisplay">1.5</span>
          <button class="btn" id="lineHeightInc">+</button>
        </div>
      </div>
    </div>
    
    <!-- Second Row: Background & Border -->
    <div class="toolbar-row">
      <div class="toolbar-section">
        <span class="section-label">BG</span>
        <input type="color" class="color-picker" id="bgColor" value="#ffffff" title="BG Color">
        <div class="divider"></div>
        <div class="slider-group">
          <input type="range" id="bgOpacity" min="0" max="100" value="100" title="Opacity">
          <span class="value" id="bgOpacityValue">100%</span>
        </div>
        <div class="divider"></div>
        <div class="checkbox-group">
          <input type="checkbox" id="fillBg" checked>
          <label for="fillBg">Fill</label>
        </div>
      </div>
      
      <div class="toolbar-section">
        <span class="section-label">Border</span>
        <div class="checkbox-group">
          <input type="checkbox" id="showBorder">
          <label for="showBorder">Show</label>
        </div>
        <div class="divider"></div>
        <input type="color" class="color-picker" id="borderColor" value="#000000" title="Border Color">
        <div class="divider"></div>
        <div class="number-control">
          <button class="btn" id="borderWidthDec">-</button>
          <span class="number-display" id="borderWidthDisplay">2</span>
          <button class="btn" id="borderWidthInc">+</button>
        </div>
      </div>
      
      <div class="toolbar-section">
        <span class="section-label">Pad</span>
        <div class="number-control">
          <button class="btn" id="paddingDec">-</button>
          <span class="number-display" id="paddingDisplay">20</span>
          <button class="btn" id="paddingInc">+</button>
        </div>
      </div>
    </div>

<!-- Third Row: Text Wrapping -->
    <div class="toolbar-row">
      <div class="toolbar-section" style="flex: 1;">
        <span class="section-label">Wrap</span>
        <div class="checkbox-group">
          <input type="checkbox" id="wrapText">
          <label for="wrapText">Enable</label>
        </div>
        <div class="divider"></div>
        <div class="wrap-control" id="wrapControl">
          <span class="section-label" style="margin-right: 0;">Max Width</span>
          <div class="slider-group">
            <input type="range" id="maxWidth" min="200" max="2000" value="800" step="50" title="Max Width">
            <span class="value" id="maxWidthValue">800px</span>
          </div>
        </div>
        <div class="divider"></div>
        <div class="checkbox-group">
          <input type="checkbox" id="rtlMode" checked>
          <label for="rtlMode">RTL</label>
        </div>
        <div class="divider"></div>
        <div class="checkbox-group">
          <input type="checkbox" id="autoPaste">
          <label for="autoPaste">Auto Paste</label>
        </div>
		<div class="divider"></div>
		<div class="checkbox-group">
		  <input type="checkbox" id="borderRadius">
		  <label for="borderRadius">Border Radius</label>
		</div>
      </div>
    </div>

    <!-- Fourth Row: Quick Access Emojis -->
    <div class="toolbar-row">
      <div class="toolbar-section" style="flex: 1;">
        <span class="section-label">Quick</span>
        <div class="quick-emoji-container" id="quickEmojiContainer">
          <!-- Emojis will be inserted here by JavaScript -->
        </div>
      </div>
    </div>

    <!-- Fifth Row: Text Color Palette -->
    <div class="toolbar-row">
      <div class="toolbar-section" style="flex: 1; justify-content: space-between;">
        <div style="display: flex; align-items: center; gap: 6px;">
          <span class="section-label">Text Color</span>
          <button class="btn btn-icon btn-color-palette" id="colorPaletteBtn" title="Open Color Palette">
            <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16">
              <path d="M8 5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3m4 3a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3M5.5 7a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m.5 6a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3"/>
              <path d="M16 8c0 3.15-1.866 2.585-3.567 2.07C11.42 9.763 10.465 9.473 10 10c-.603.683-.475 1.819-.351 2.92C9.826 14.495 9.996 16 8 16a8 8 0 1 1 8-8m-8 7c.611 0 .654-.171.655-.176.078-.146.124-.464.07-1.119-.014-.168-.037-.37-.061-.591-.052-.464-.112-1.005-.118-1.462-.01-.707.083-1.61.704-2.314.369-.417.845-.578 1.272-.618.404-.038.812.026 1.16.104.343.077.702.186 1.025.284l.028.008c.346.105.658.199.953.266.653.148.904.083.991.024C14.717 9.38 15 9.161 15 8a7 7 0 1 0-7 7"/>
            </svg>
          </button>
        </div>
        
      </div>
    </div>
  </div>
  
  <div class="text-container">
    <div id="textInput" contenteditable="true" placeholder="Type your RTL text here..."></div>
  </div>
  
  <div class="bottom-bar">
    <button class="btn btn-icon btn-emoji" id="emojiBtn" title="Insert Emoji">
      <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16">
        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
        <path d="M4.285 9.567a.5.5 0 0 1 .683.183A3.5 3.5 0 0 0 8 11.5a3.5 3.5 0 0 0 3.032-1.75.5.5 0 1 1 .866.5A4.5 4.5 0 0 1 8 12.5a4.5 4.5 0 0 1-3.898-2.25.5.5 0 0 1 .183-.683M7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5m4 0c0 .828-.448 1.5-1 1.5s-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5"/>
      </svg>
    </button>
    
    <button class="btn btn-icon btn-unicode" id="unicodeBtn" title="Insert Unicode">
      <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16">
        <path d="M1 2.5A1.5 1.5 0 0 1 2.5 1h3A1.5 1.5 0 0 1 7 2.5v3A1.5 1.5 0 0 1 5.5 7h-3A1.5 1.5 0 0 1 1 5.5zm8 0A1.5 1.5 0 0 1 10.5 1h3A1.5 1.5 0 0 1 15 2.5v3A1.5 1.5 0 0 1 13.5 7h-3A1.5 1.5 0 0 1 9 5.5zm-8 8A1.5 1.5 0 0 1 2.5 9h3A1.5 1.5 0 0 1 7 10.5v3A1.5 1.5 0 0 1 5.5 15h-3A1.5 1.5 0 0 1 1 13.5zm8 0A1.5 1.5 0 0 1 10.5 9h3a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 9 13.5z"/>
      </svg>
    </button>
    
    <button id="insertBtn">
      <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16">
        <path d="M9.5 0a.5.5 0 0 1 .5.5.5.5 0 0 0 .5.5.5.5 0 0 1 .5.5V2a.5.5 0 0 1-.5.5h-5A.5.5 0 0 1 5 2v-.5a.5.5 0 0 1 .5-.5.5.5 0 0 0 .5-.5.5.5 0 0 1 .5-.5z"/>
        <path d="M3.5 1h.585A1.5 1.5 0 0 0 4 1.5V2a1.5 1.5 0 0 0 1.5 1.5h5A1.5 1.5 0 0 0 12 2v-.5q-.001-.264-.085-.5h.585A1.5 1.5 0 0 1 14 2.5v12a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 14.5v-12A1.5 1.5 0 0 1 3.5 1"/>
      </svg>
      <span>Create & Copy Image</span>
      <span class="shortcut-hint">Ctrl+Enter</span>
    </button>
    
    <button class="btn btn-icon btn-download" id="downloadBtn" title="Download Image">
      <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16">
        <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"/>
        <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z"/>
      </svg>
    </button>
    
    <button class="btn btn-icon btn-recycle" id="recycleBtn" title="Clear Text">
      <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16">
        <path d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5M8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5m3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0"/>
      </svg>
    </button>
    
    <button class="btn btn-icon btn-preview" id="previewBtn" title="Preview Image">
      <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16">
        <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z"/>
        <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0"/>
      </svg>
    </button>
  </div>
  
  <canvas id="canvas" style="display:none;"></canvas>
  
  <!-- Toast Notification -->
  <div class="toast" id="toast">
    <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16">
      <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
    </svg>
    <span id="toastMessage"></span>
  </div>
  
  <!-- Preview Modal -->
  <div class="preview-modal" id="previewModal">
    <div class="preview-content">
      <div class="preview-header">
        <span class="preview-title">Image Preview</span>
        <button class="preview-close" id="closePreview">Close (ESC)</button>
      </div>
      <div class="preview-image-container">
        <img id="previewImage" class="preview-image" alt="Preview">
      </div>
    </div>
  </div>
  
  <!-- Color Palette Panel -->
  <div class="color-palette-panel" id="colorPalettePanel">
    <div class="color-palette-header">
      <span class="color-palette-title">Select Color for Text</span>
      <button class="color-palette-close" id="closeColorPalette">Close (ESC)</button>
    </div>
    
    <div class="color-palette-grid" id="colorPaletteGrid">
      <!-- Color items will be inserted here by JavaScript -->
    </div>
    
    <div class="color-palette-custom">
      <label>Custom:</label>
      <input type="color" id="customColorPicker" value="#000000" title="Pick Custom Color">
      <button class="btn" id="resetColorBtn">Reset Color</button>
    </div>
  </div>
  
  <!-- Emoji Picker Modal -->
  <div class="picker-modal" id="emojiPicker">
    <div class="picker-content">
      <div class="picker-header">
        <span class="picker-title">Select Emoji</span>
        <button class="picker-close" id="closeEmojiPicker">Close (ESC)</button>
      </div>
      <div class="picker-grid" id="emojiGrid"></div>
    </div>
  </div>
  
  <!-- Unicode Picker Modal -->
  <div class="picker-modal" id="unicodePicker">
    <div class="picker-content">
      <div class="picker-header">
        <span class="section-title">Select Unicode Character</span>
        <button class="picker-close" id="closeUnicodePicker">Close (ESC)</button>
      </div>
      <div class="picker-grid" id="unicodeGrid"></div>
    </div>
  </div>
  
  <script src="popup.js"></script>
</body>
</html>
